<!--ヘッター-->
<%= render 'layouts/header' %>
 <div class="container mt-5">
  <div class="row mx-5 mt-5">
  <!--カテゴリ-->
  <%= render "layouts/side", post_categories: @post_categories, question_categories: @question_categories, hashtags: @hashtags %>
    <!--一覧-->
    <div class="col-9 offset-1">
     <div class="mt-2 mb-1">
        <%= link_to(user_path(@question.user), class:"text-dark") do %>
          <%= image_tag @question.user.get_profile_image(100,100),class: "rounded-circle icon" %>
          <%= @question.user.name %>
        <% end %>
        <!--自分の投稿は編集/削除ができる-->
        <% if @question.user == current_user %>
          <%= link_to edit_question_path(@question) do %>
            編集
          <% end %>|
          <%= link_to question_path(@question), method: :delete, data: { confirm: '本当に消しますか？' } do%>
            削除
          <% end %>
        <% end %>
      </div>
      <div class="d-flex">
        <div class="side-image">
           <%= image_tag @question.get_question_image(700,400) %><br>
           <!--ゲストユーザー以外はコメントできる-->
           <% if current_user.name != "guestuser" %>
             <%= form_with model: [@question, @answer], method: :post , local: true do |f| %>
              <div class="form-group">
                <%= f.text_area :answer, placeholder: "回答をここに",class: 'form-control answer' %>
              </div>
                <%= f.submit "投稿",class: "btn btn-outline-success" %>
             <% end %>
           <% end %>
         </div>
         <!--文章-->
         <div class="side-text">
           <p class=" font-weight-bold">
              <%= @question.question_title %>
           </p>
            <p>
              <%= @question.question_body %>
            </p>
            <div class="row mx-2 mt-5">
        <div>
          <h5 class="font-weight-normal">
            <i class="fa-regular fa-message"></i><%= @question.answers.count %>
          </h5>
          <!--コメント一覧-->
          <% @question.answers.each do |answer| %>
             <%= image_tag answer.user.get_profile_image(100,100),class: "rounded-circle icon"%>
                <%= link_to(user_path(answer.user), class:"text-dark") do %>
                   <%=answer.user.name %>
                <% end %>
                   <%= answer.created_at.strftime('%Y/%m/%d') %><br>
                   <%= answer.answer %>
                     <!--コメントしたのが自分のものの場合削除できる-->
              <% if answer.user == current_user %>
                <%= link_to "削除", question_answer_path(answer.question, answer), method: :delete %>
              <% end %>
              <br>
          <% end %>
        </div>
         </div>
      </div>
      </div>
    </div>
  </div>
</div>
<!--フッター-->
<%= render 'layouts/footer' %>
