<!--ヘッター-->
<%= render 'layouts/header' %>
<div class="container mt-5">
<div class="row mx-4 mt-5">
<!--カテゴリ-->
<%= render "layouts/side", post_categories: @post_categories, question_categories: @question_categories %>
<h1>投稿詳細</h1>
<!--フッター-->
<div class="col-9 offset-1">
    <div class="mt-2 mb-1">
    <%= link_to(admin_user_path(@post_image.user), class:"text-dark") do %>
    <%= image_tag @post_image.user.get_profile_image(30,30),class: "rounded-circle" %>
    <%= @post_image.user.name %>
    <% end %>
    <!--自分の投稿は編集/削除ができる-->
    <% if @post_image.user == current_user %>

    <%= link_to edit_post_image_path(@post_image) do %>
    編集
    <% end %>|
    <%= link_to post_image_path(@post_image), method: :delete, data: { confirm: '本当に消しますか？' } do%>
    削除
    <% end %>

    <% end %>
    </div>

    <div class="d-flex">
    <div class="side-image">
    <%= image_tag @post_image.get_image(350,200) %>
    </div>
    <div class="side-text">
    <p class="font-weight-bold"><%= @post_image.title %></p>
    <p><%= @post_image.body %></p>
    <p>♥<%= @post_image.favorites.count %>
    <i class="fa-regular fa-message"></i><%= @post_image.comments.count %></p>
    <p><%= render_with_hashtags(@post_image.hashbody) %></p>
    <!--ゲスト以外はいいねを押すことができる-->

    <div class="col-3">
    <!--コメント一覧-->
    <% @post_image.comments.each do |comment| %>
    <%= image_tag comment.user.get_profile_image(30,30),class: "rounded-circle"%>
    <%= comment.user.name %>
    <%= comment.created_at.strftime('%Y/%m/%d') %><%= comment.comment %>
    <!--コメントしたのが自分のものの場合削除できる-->
    <% if comment.user == current_user %>
    <%= link_to "削除", post_image_comment_path(comment.post_image, comment), method: :delete %>
    　　<br>
    <% end %>
    <% end %>
    　</div>
    </div>
    </div>
    </div>
<%= render 'layouts/footer' %>